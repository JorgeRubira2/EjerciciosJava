<!DOCTYPE html> 
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>Kanban proyecto</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"/>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <style>
        .row{
            text-align: center;

        }
        .col-3, .col, .col-6 {
            text-align: center;
            border: 2px solid #333333;
        }

        textArea {
            height: 200px;
            width: 300px;
        }
    </style>
    <body>
        <div class="container">
            <div class="row">
                <div class ="col-3">
                    <div>Story</div>
                    <span>
                        <a class="btn btn-primary btn-sm"  onclick="mostrarFormulario('formularioAltaTask', 'Alta de Tareas')"> + add task</a>                
                    </span>
                </div>
                <div class ="col-6">
                    <div  class="row">
                        <span>Waiting</span>
                    </div>
                    <div class="row">
                        <div class="col">Waiting</div>
                        <div class="col">Working</div>
                    </div> 
                </div>
                <div class ="col-3">
                    <span>Done</span>
                </div>
            </div>
        </div>


        <div class="container" th:each="tarea:${tareas}">
            <div class="row">
                <div class ="col-3" >
                    <div>
                    <div class="card row col" >
                            <img class="card-img-top" alt="tarea actual">
                            <div class="card-body">
                                <h5 class="card-title"><span th:text="${' Estimacion' +tarea.horasEstimacion}"/>  <span th:text="${'trabajadas '+tarea.horasTrabajadas}"/></h5>
                                <p class="card-text"><span th:text="${tarea.descripcion}"/> </p>
                                <a href="#" class="btn btn-primary">Go somewhere</a>
                            </div>
                    </div>
                    </div>
                </div>
                <div class ="col-6">
                    <div  class="row">
                        <span>Waiting</span>
                    </div>
                    <div class="row">
                        <div class="col">
                            Waiting
                        </div>
                        <div class="col">
                            Working
                        </div>
                    </div> 
                </div>
                <div class ="col-3">
                    <span>Done</span>
                </div>
            </div>
        </div>
        
        <!-- Formulario de alta  --> 
        
        <div id="formularioAltaTask" style="display:none" >
            <form id= "AltaTask" method="get" >
                <div class="container" >
                    <div class="row" >
                        <div class="form-group col-7">
                            <label for="descripcion">descripción Tarea</label>
                            <textarea id="descripcion" name="descripcion" th:value="${descripcion}">  </textarea>
                        </div>
                    </div>
                    <div class="row" >
                        <div class="form-group col-7">
                            <label for="horasEstimacion">Horas Estimadas</label>
                            <input type="number" id="horasEstimacion" name="horasEstimacion" th:value="${horasEstimacion}"/>
                        </div>
                    </div>
                    <br/>
                    <div class="row col-7">
                        <a class="btn btn-primary"  onclick="enviar('AltaTask','/ejercicio04/nuevaTarea')"> Alta <i class="fas fa-tasks"></i> </a>
                    </div>
                </div>
            </form>
        </div>

        

    </body>

    <!-- La solución optima es poner los scripts al final -->
    <script src="https://code.jquery.com/jquery-3.6.0.js" ></script>    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootbox.js/5.5.2/bootbox.js"></script>
    <script>
                            function mostrarFormulario(formNombre, formTitulo) {
                                bootbox.dialog({
                                    title: formTitulo,
                                    size: 'medium',
                                    message:"<div id='bootboxform'>" + $('#' + formNombre).html() + "</div>"
                                })
                            }
                            
                            function enviar(formularioId,accionEnvio){
                                $('#bootboxform #'+formularioId).attr('action',accionEnvio).submit();
                                
                            }

    </script>
</html>
